
# جلب البيانات مسبقا 

## بيانات صفحة المستوى الأعلى [#top-level-page-data] 

هناك العديد من الطرق لجلب البيانات مسبقا ل SWR. بالنسبة لطلبات المستوى الأعلى، يوصى بشدة [`rel="preload"`] (https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content):

```html
<link rel="preload" href="/api/data" as="fetch" crossorigin="anonymous">
```
فقط ضعه داخل HTML الخاص بك `<head>`. إنه سهل وسريع وأصلي.

سيجلب البيانات مسبقا عند تحميل HTML، حتى قبل بدء تنزيل جافا سكريبت. ستعيد جميع طلبات الجلب الواردة بنفس عنوان URL إعادة استخدام النتيجة (بما في ذلك SWR، بالطبع). رقم 
 
## الجلب المسبق برمجيا [#الجلب المسبق برمجيا] رقم 
 
يوفر SWR واجهة برمجة التطبيقات `preload` للحصول مسبقا على الموارد برمجيا وتخزين النتائج في ذاكرة التخزين المؤقت. `preload` يقبل `key` و `fetcher` كحجج. رقم 

يمكنك استدعاء `preload` حتى خارج React.

```jsx
import { useState } from 'react'
import useSWR, { preload } from 'swr'

const fetcher = (url) => fetch(url).then((res) => res.json())

// Preload the resource before rendering the User component below,
// this prevents potential waterfalls in your application.
// You can also start preloading when hovering the button or link, too.
preload('/api/user', fetcher)

function User() {
  const { data } = useSWR('/api/user', fetcher)
  ...
}

export default function App() {
  const [show, setShow] = useState(false)
  return (
    <div>
      <button onClick={() => setShow(true)}>Show User</button>
      {show ? <User /> : null}
    </div>
  )
}
```

ضمن شجرة عرض React، يتوفر `preload` أيضا للاستخدام في معالجات الأحداث أو التأثيرات.

```jsx
function App({ userId }) {
  const [show, setShow] = useState(false)

  // preload in effects
  useEffect(() => {
    preload('/api/user?id=' + userId, fetcher)
  }, [userId])

  return (
    <div>
      <button
        onClick={() => setShow(true)}
        {/* preload in event callbacks */}
        onHover={() => preload('/api/user?id=' + userId, fetcher)}
      >
        Show User
      </button>
      {show ? <User /> : null}
    </div>
  )
}
```

جنبا إلى جنب مع تقنيات مثل [الجلب المسبق للصفحة](https://nextjs.org/docs/api-reference/next/router#routerprefetch) في Next.js، ستتمكن من تحميل كل من الصفحة التالية والبيانات على الفور. رقم 

في وضع التشويق، يجب عليك استخدام `preload` لتجنب مشاكل الشلال.

```jsx
import useSWR, { preload } from 'swr'

// should call before rendering
preload('/api/user', fetcher);
preload('/api/movies', fetcher);

const Page = () => {
  // The below useSWR hooks will suspend the rendering, but the requests to `/api/user` and `/api/movies` have started by `preload` already,
  // so the waterfall problem doesn't happen.
  const { data: user } = useSWR('/api/user', fetcher, { suspense: true });
  const { data: movies } = useSWR('/api/movies', fetcher, { suspense: true });
  return (
    <div>
      <User user={user} />
      <Movies movies={movies} />
    </div>
  );
}
```

## بيانات الملء المسبق [# بيانات ما قبل الملء] 

إذا كنت ترغب في ملء البيانات الموجودة مسبقا في ذاكرة التخزين المؤقت SWR، فيمكنك استخدام خيار `fallbackData`. على سبيل المثال:

```jsx
useSWR('/api/data', fetcher, { fallbackData: prefetchedData })
```

إذا لم تجلب SWR البيانات بعد، فسيؤدي هذا الخطاف إلى إرجاع `prefetchedData` كتراجع. 

يمكنك أيضا تكوين هذا لجميع خطافات SWR ومفاتيح متعددة باستخدام خيار `` و `fallback`. تحقق من [Next.js SSG وSSR](/docs/with-nextjs) لمزيد من التفاصيل.
