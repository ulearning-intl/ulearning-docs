import { Callout } from 'nextra-theme-docs'
import Video from 'components/video'

ๆบ็ฟป
# ููู SWR ุฑูู 

## ุขูุฉ ุงูุฏููุฉ  ุฑูู [#ุขูุฉ ุงูุฏููุฉ]

ูููู `useSWR` ุจุฅุฑุฌุงุน `data` ู`error` ู`isLoading` ู`isValidating` ุงุนุชูุงุฏุง ุนูู ุญุงูุฉ ูุธููุฉ `fetcher`. ุชุตู ูุฐู ุงูุฑุณูู ุงูุจูุงููุฉ ููู ุชููู SWR ุจุฅุฑุฌุงุน ุงูููู ูู ุจุนุถ ุงูุณููุงุฑูููุงุช.

### ุฌูุจ ูุชุฌุฏูุฏ [#ุฌูุจ-ุฅุนุงุฏุฉ ุงูุชุญูู] 

ูุฐุง ุงูููุท ูู ุฌูุจ ุงูุจูุงูุงุช ูุชุฌุฏูุฏ ุตุญุชูุง ูุงุญูุง. 

![ ููุท ููุฌูุจ ูุงูุงูุชุญุณุงู](/img/understanding/fetch-and-revalidate.svg)

### ุชุบููุฑ ุงูููุชุงุญ [#ุชุบููุฑ ุงูููุชุงุญ] ุฑูู 

ูุฐุง ุงูููุท ูู ุฌูุจ ุงูุจูุงูุงุช ูุชุบููุฑ ุงูููุชุงุญ ูุฅุนุงุฏุฉ ุงูุชุญูู ูู ุตุญุชู ูุงุญูุง. ุฑูู 
 
![ ููุท ูุชุบููุฑ ุงูููุชุงุญ](/img/understanding/key-change.svg)

### ุชุบููุฑ ุงูููุชุงุญ + ุงูุจูุงูุงุช ุงูุณุงุจูุฉ  ุฑูู [#key-change--previous-data]

ูุฐุง ุงูููุท ูู ุฌูุจ ุงูุจูุงูุงุช ูุชุบููุฑ ุงูููุชุงุญ ูุฅุนุงุฏุฉ ุงูุชุญูู ูู ุตุญุชู ูุงุญูุง ุจุงุณุชุฎุฏุงู ุฎูุงุฑ `keepPreviousData`. ุฑูู 

![ ููุท ููุชุบููุฑ ุงูุฑุฆูุณู + ุงูุจูุงูุงุช ุงูุณุงุจูุฉ](/img/understanding/key-change-previous-data.svg)

### ุชุฑุงุฌุน [#ุชุฑุงุฌุน] ุฑูู 

ูุฐุง ุงูููุท ูู ุฌูุจ ุงูุจูุงูุงุช ูุฅุนุงุฏุฉ ุงูุชุญูู ูู ุตุญุชูุง ูุงุญูุง ุจุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุงุญุชูุงุทูุฉ. ุฑูู 
 
![ ููุท ููุชุฑุงุฌุน](/img/understanding/fallback.svg)


### ุชุบููุฑ ุงูููุชุงุญ + ุงูุงุญุชูุงุทู [#key-change--fallback] 

ูุฐุง ุงูููุท ูู ุฌูุจ ุงูุจูุงูุงุช ูุชุบููุฑ ุงูููุชุงุญ ูุฅุนุงุฏุฉ ุงูุชุญูู ูู ูููุชู ูุงุญูุง ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงุญุชูุงุทูุฉ. 
 
![ ููุท ูุชุบููุฑ ุงูููุชุงุญ + ุงูุงุญุชูุงุทู](/img/understanding/key-change-fallback.svg) 

### ุชุบููุฑ ุงูููุชุงุญ + ุงูุจูุงูุงุช ุงูุณุงุจูุฉ + ุงูุชุฑุงุฌุน [#key-change--previous-data--fallback] ุฑูู 
 
ูุฐุง ุงูููุท ูู ุฌูุจ ุงูุจูุงูุงุช ูุชุบููุฑ ุงูููุชุงุญ ูุฅุนุงุฏุฉ ุงูุชุญูู ูู ุตุญุชู ูุงุญูุง ุจุงุณุชุฎุฏุงู ุฎูุงุฑ `keepPreviousData` ูุงูุจูุงูุงุช ุงูุงุญุชูุงุฏูุฉ. ุฑูู 
 
![ ููุท ูุชุบููุฑ ุงูููุชุงุญ + ุงูุจูุงูุงุช ุงูุณุงุจูุฉ + ุงูุชุฑุงุฌุน](/img/understanding/key-change-previous-data-fallback.svg)

## ุงูุฌูุน ูุน isLoading ู isValidating ูุชุญุณูู UX [#combining-with-isloading-and-isvalidating-for-better-ux] ุฑูู 
 
ุจุงูููุงุฑูุฉ ูุน ูููุฉ `isValidating` ุงูุญุงููุฉุ ูุฅู `isLoading` ูู ุฎุงุตูุฉ ุฌุฏูุฏุฉ ูููู ุฃู ุชุณุงุนุฏู ูู ุญุงูุงุช ุงูุชุญููู ุงูุฃูุซุฑ ุนููููุฉ ู UX. ุฑูู 
 
- `isValidating` ูุตุจุญ `true` ูููุง ูุงู ููุงู ุทูุจ ูุณุชูุฑ **ุณูุงุก ุชู ุชุญููู ุงูุจูุงูุงุช ุฃู ูุง** ุฑูู 
- `isLoading` ูุตุจุญ `true` ุนูุฏูุง ูููู ููุงู ุทูุจ ูุณุชูุฑ ู **ูู ูุชู ุชุญููู ุงูุจูุงูุงุช ุจุนุฏ**. ุฑูู 
 
ุจุจุณุงุทุฉ ุฃููู ุฃูู ููููู ุงุณุชุฎุฏุงู `isValidating` ููุฅุดุงุฑุฉ ูู ูู ูุฑุฉ ุชูุฌุฏ ูููุง ุฅุนุงุฏุฉ ุชุญูู ูุณุชูุฑุฉุ ู `isLoading` ููุฅุดุงุฑุฉ ุฅูู ุฃู SWR ูุชู ุฅุนุงุฏุฉ ุงูุชุญูู ูู ุงูุตุญุฉ ูููู ูุง ุชูุฌุฏ ุจูุงูุงุช ูุนุฑุถูุง ุจุนุฏ.

<Callout emoji="๐">
 ูุง ุชุนุชุจุฑ ุงูุจูุงูุงุช ุงูุงุญุชูุงุทูุฉ ูุงูุจูุงูุงุช ุงูุณุงุจูุฉ "ุงูุจูุงูุงุช ุงููุญููุฉ"ุ ูุฐูู ุนูุฏ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุงุญุชูุงุทูุฉ ุฃู ุชูููู ุฎูุงุฑ keepPreviousDataุ ูุฏ ูููู ูุฏูู ุจูุงูุงุช ูุนุฑุถูุง.
</Callout>

```jsx
function Stock() {
  const { data, isLoading, isValidating } = useSWR(STOCK_API, fetcher, {
    refreshInterval: 3000
  });

  // If it's still loading the initial data, there is nothing to display.
  // We return a skeleton here.
  if (isLoading) return <div className="skeleton" />;

  // Otherwise, display the data and a spinner that indicates a background
  // revalidation.
  return (
    <>
      <div>${data}</div>
      {isValidating ? <div className="spinner" /> : null}
    </>
  );
}
```

![ ูุซุงู ุนูู ุงุณุชุฎุฏุงู ุญุงูุฉ isLoading](/img/understanding/isloading.gif) 
 
ููููู ุงูุนุซูุฑ ุนูู ูุซุงู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ [ููุง](https://codesandbox.io/s/swr-isloading-jtopow) 
 
## ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุงูุณุงุจูุฉ ููุญุตูู ุนูู ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู [#return-previous-data-for-better-ux] 
 
ุนูุฏ ุงูููุงู ุจุฌูุจ ุงูุจูุงูุงุช ุงุณุชูุงุฏุง ุฅูู ุฅุฌุฑุงุกุงุช ุงููุณุชุฎุฏู ุงููุณุชูุฑุฉุ ุนูู ุณุจูู ุงููุซุงู ุงูุจุญุซ ูู ุงูููุช ุงููุนูู ุนูุฏ ุงููุชุงุจุฉุ ูููู ุฃู ูุคุฏู ุงูุงุญุชูุงุธ ุจุงูุจูุงูุงุช ุงูุชู ุชู ุฌูุจูุง ุงูุณุงุจูุฉ ุฅูู ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ูุซูุฑุง. `keepPreviousData` ูู ุฎูุงุฑ ูุชูููู ูุฐุง ุงูุณููู. ุฅููู ูุงุฌูุฉ ูุณุชุฎุฏู ุจุญุซ ุจุณูุทุฉ:

```jsx
function Search() {
  const [search, setSearch] = React.useState('');

  const { data, isLoading } = useSWR(`/search?q=${search}`, fetcher, {
    keepPreviousData: true
  });

  return (
    <div>
      <input
        type="text"
        value={search}
        onChange={(e) => setSearch(e.target.value)}
        placeholder="Search..."
      />

      <div className={isLoading ? "loading" : ""}>
        {data?.products.map(item => <Product key={item.id} name={item.name} />)
      </div>
    </div>
  );
}
```

ูุน ุชูููู `keepPreviousData`ุ ุณุชุธู ุชุญุตู ุนูู ุงูุจูุงูุงุช ุงูุณุงุจูุฉ ุญุชู ูู ููุช ุจุชุบููุฑ ููุชุงุญ SWR ูุจุฏุฃุช ุจูุงูุงุช ุงูููุชุงุญ ุงูุฌุฏูุฏ ูู ุงูุชุญููู ูุฑุฉ ุฃุฎุฑู.

<Video
  src="https://user-images.githubusercontent.com/3676859/163695903-a3eb1259-180e-41e0-821e-21c320201194.mp4"
  caption="ุงุญุชูุธ ุจูุชุงุฆุฌ ุงูุจุญุซ ุงูุณุงุจูุฉ ุนูุฏ ุชูููู keepPreviousData"
  ratio={640/730}
/>

ููููู ุงูุนุซูุฑ ุนูู ุงูุฑูุฒ ุงููุงูู ููุฐุง ุงููุซุงู ููุง: https://codesandbox.io/s/swr-keeppreviousdata-fsjz3m. 
 
## ูุฌููุนุฉ ุงูุชุจุนูุฉ ููุฃุฏุงุก [#ูุฌููุนุฉ ุงูุชุจุนูุฉ ููุงุจู ุงูุฃุฏุงุก] 
 
ูุง ูุคุฏู SWR ุฅูู ุฅุนุงุฏุฉ ุงูุชูุฏูู ุฅูุง ุนูุฏ ุชุญุฏูุซ ุงูุญุงูุงุช ุงููุณุชุฎุฏูุฉ ูู ุงููููู. ุฅุฐุง ููุช ุชุณุชุฎุฏู ููุท `data` ูู ุงูููููุ ูุฅู SWR ุชุชุฌุงูู ุชุญุฏูุซุงุช ุงูุฎุตุงุฆุต ุงูุฃุฎุฑู ูุซู `isValidating` ู`isLoading`. ูุฐุง ูููู ูู ุนุฏุฏ ุงูุชูุฏูู ูุซูุฑุง. ูููู ุงูุนุซูุฑ ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช [ููุง](/docs/advanced/performance#dependency-collection).
